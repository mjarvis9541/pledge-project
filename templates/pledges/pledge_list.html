{% extends 'base.html' %}

{% block title %}
Make a Pledge | Home
{% endblock title %}

{% block content %}
<style>
    body {
        background: #efebe9;
    }
</style>

<h1 class="mt-3">All Pledges</h1>

<p>View all pledges made by our community below; along with their co2, water and waste savings!</p>

<p class="mb-4">Feel free to sign up and make your own pledge, it's quick and easy - and brings about a brighter future
    for everyone!
</p>

<div class="card mb-4">
    <div class="card-body">
        <h2>Veg Out Pledges</h2>
        <p>Pledges made by our users for eating greener meals each week!</p>
        <div class="table-responsive">
            <table class="table table-striped table-hover text-center">
                <caption>Total Pledges: {{ veg_out_list|length }}</caption>
                <thead>
                    <tr>
                        <th style="width: 1%; text-align: center;">#</th>
                        <th style="text-align: start;">User</th>
                        <th style="width: 15%;">Pledge Start</th>
                        <th style="width: 15%;">Pledge End</th>
                        <th style="width: 15%;">Co2 Savings (kg)</th>
                        <th style="width: 15%;">Water Savings (kg)</th>
                        <th style="width: 15%;">Waste Savings (kg)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for object in veg_out_list %}
                    <tr>
                        <td style="width: 1%; text-align: center;">{{ forloop.counter }}</td>
                        <td style="text-align: start;">
                            <a href="{% url 'pledges:user_pledge_list' object.user_id %}">
                                {{ object.user }}
                            </a>
                        </td>
                        <td style="width: 15%; text-align: center;">{{ object.pledge_start|date:"d M Y" }}</td>
                        <td style="width: 15%; text-align: center;">{{ object.pledge_end|date:"d M Y" }}</td>
                        <td style="width: 15%; text-align: center;">{{ object.qs_co2_savings|floatformat:2 }}</td>
                        <td style="width: 15%; text-align: center;">{{ object.qs_water_savings|floatformat:2 }}</td>
                        <td style="width: 15%; text-align: center;">{{ object.qs_waste_savings|floatformat:2 }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th style="text-align: start;" colspan="4">Total Savings</th>
                        <th style="width: 15%; text-align: center;">{{ veg_out_total.total_co2|floatformat:2 }}</th>
                        <th style="width: 15%; text-align: center;">{{ veg_out_total.total_water|floatformat:2 }}</th>
                        <th style="width: 15%; text-align: center;">{{ veg_out_total.total_waste|floatformat:2 }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
        <a class="btn btn-primary" href="#">Make a Pledge</a>
    </div>
</div>



<div class="card mb-4">
    <div class="card-body">
        <h2>Clean Bill Pledges</h2>
        <p>Pledges made by our users for switching energy providers for greener energy!</p>
        <div class="table-responsive">
            <table class="table table-striped table-hover text-center">
                <caption>Total Pledges: {{ clean_bill_list|length }}</caption>
                <thead>
                    <tr>
                        <th style="width: 1%; text-align: center;">#</th>
                        <th style="text-align: start;">User</th>
                        <th style="width: 15%;">Pledge Start</th>
                        <th style="width: 15%;">Pledge End</th>
                        <th style="width: 15%;">Co2 Savings (kg)</th>
                        <th style="width: 15%;">Water Savings (kg)</th>
                        <th style="width: 15%;">Waste Savings (kg)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for object in clean_bill_list %}
                    <tr>
                        <td style="width: 1%; text-align: center;">{{ forloop.counter }}</td>
                        <td style="text-align: start;">
                            <a href="{% url 'pledges:user_pledge_list' object.user_id %}">
                                {{ object.user }}
                            </a>
                        </td>
                        <td style="width: 15%; text-align: center;">{{ object.pledge_start|date:"d M Y" }}</td>
                        <td style="width: 15%; text-align: center;">{{ object.pledge_end|date:"d M Y" }}</td>
                        <td style="width: 15%; text-align: center;">{{ object.qs_co2_savings|floatformat:1 }}</td>
                        <td style="width: 15%; text-align: center;"></td>
                        <td style="width: 15%; text-align: center;"></td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th style="text-align: start;" colspan="4">Total Savings</th>
                        <th style="width: 15%; text-align: center;">{{ clean_bill_total.total_co2|floatformat:1 }}</th>
                        <th style="width: 15%; text-align: center;">n/a</th>
                        <th style="width: 15%; text-align: center;">n/a</th>
                    </tr>
                </tfoot>
            </table>
        </div>
        <a class="btn btn-primary" href="#">Make a Pledge</a>
    </div>
</div>


{% endblock content %}